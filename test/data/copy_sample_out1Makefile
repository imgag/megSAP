all: chmod import_runqc import_read_counts copy_Exome_Diagnostik_diagnostic copy_IVac_research queue_Exome_Diagnostik_diagnostic email_IVac

chmod:
	chmod -R 775 Unaligned

import_runqc:
	php /mnt/storage2/megSAP/pipeline/src/NGS/runqc_parser.php -name "#00001" -run_dir Unaligned/../ -force

import_read_counts:
	php /mnt/storage2/megSAP/pipeline/src/NGS/import_sample_read_counts.php -stats Unaligned/Stats/Stats.json -db NGSD_TEST 

copy_Exome_Diagnostik_diagnostic:
	mv Unaligned/Exome_Diagnostik/Sample_DX180049_01/ /mnt/storage2/projects/diagnostic/Exome_Diagnostik/
	chmod -R 775 /mnt/storage2/projects/diagnostic/Exome_Diagnostik/Sample_DX180049_01
	chgrp -R f_ad_bi_l_medgen_access_storages /mnt/storage2/projects/diagnostic/Exome_Diagnostik/Sample_DX180049_01
	mv Unaligned/Exome_Diagnostik/Sample_DX180050_02/ /mnt/storage2/projects/diagnostic/Exome_Diagnostik/
	chmod -R 775 /mnt/storage2/projects/diagnostic/Exome_Diagnostik/Sample_DX180050_02
	chgrp -R f_ad_bi_l_medgen_access_storages /mnt/storage2/projects/diagnostic/Exome_Diagnostik/Sample_DX180050_02

copy_IVac_research:
	mkdir -p /mnt/storage1/projects/research/IVac/
	chmod 775 /mnt/storage1/projects/research/IVac/
	mv Unaligned/IVac/Sample_FO180004_01/ /mnt/storage1/projects/research/IVac/
	chmod -R 775 /mnt/storage1/projects/research/IVac/Sample_FO180004_01
	chgrp -R f_ad_bi_l_medgen_access_storages /mnt/storage1/projects/research/IVac/Sample_FO180004_01
	mv Unaligned/IVac/Sample_FO180005_01/ /mnt/storage1/projects/research/IVac/
	chmod -R 775 /mnt/storage1/projects/research/IVac/Sample_FO180005_01
	chgrp -R f_ad_bi_l_medgen_access_storages /mnt/storage1/projects/research/IVac/Sample_FO180005_01

queue_Exome_Diagnostik_diagnostic:
	php /mnt/storage2/megSAP/pipeline/src/NGS/db_queue_analysis.php -type 'single sample' -samples DX180049_01
	php /mnt/storage2/megSAP/pipeline/src/NGS/db_queue_analysis.php -type 'single sample' -samples DX180050_02

email_IVac:
	php -r 'mail("no_valid@email2.de","Neue Daten fuer IVac", "Hallo GenLab import,\n\ndie FASTQ-Dateien der folgenden Proben des Projekts IVac liegen vor:\n\nFO180004_01\nFO180005_01\n\nViele Gruesse\n\n  die Bioinformatik","Reply-To: medgen.bioinformatik@med.uni-tuebingen.de");'
